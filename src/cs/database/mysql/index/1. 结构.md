# 结构



索引结构

![截屏2022-07-28 20.56.58](https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/3978/%E6%88%AA%E5%B1%8F2022-07-28%2020.56.58.png)

支持情况

![截屏2022-07-28 20.57.23](https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/3978/%E6%88%AA%E5%B1%8F2022-07-28%2020.57.23.png)





二叉树：

缺点：顺序插入时，形成链表，查询性能大大降低。大数据量情况下，层级较深，检索速度慢

AVL、红黑树：

缺点：大数据量情况下，层级较深，检索速度慢



B Tree（多路平衡查找树）

以一颗最大度数(max-degree)为5阶的b-tree为例(每个节点最多存储4个key，5个指针)

中间元素向上分裂



B+Tree

所有的元素都会在叶子结点层

上面的元素只起索引的作用

叶子结点形成一个单向链表

中间元素向上分裂，同时会保留在右子树里

数据存储只在叶子结点中



MySQL中对B+Tree进行了优化，叶子层单向指针变成双向

![截屏2022-07-28 21.19.21](https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/3978/%E6%88%AA%E5%B1%8F2022-07-28%2021.19.21.png)

一页16k，上面层，每一个节点都只存key和指针，就可以存很多很多





Hash索引

冲突时，就用链表存储



优点：效率高

缺点：只支持等值匹配，不支持范围索引和排序操作

只有Memory引擎支持

而InnoDB中具有自适应Hash索引，满足条件时，自动设计为Hash





为什么MySQL采用B+

- 相对于二叉树，层级更少，搜索效率高；

- 对于B-tree，无论是叶子节点还是非叶子节点，都会，这样导致一页中存储的键值减少，指针跟着减少，要同样保存大量数据，只能增加树的高度，导致性能降低;

  （而且B+搜索效率稳定，而且便于范围搜索和排序）

- 相比于Hash，B+支持范围索引和排序操作

