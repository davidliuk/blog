# 存储引擎

## InnoDB

兼顾高可靠性和高性能的通用存储引擎

MySQL5.5 后默认 InnoDB

### 特点

1. DML 操作遵循 ACID，支持事务
2. 行级锁，提高并发访问性能
3. 支持外键 foreign key 约束，保证数据的完整性和正确性

### 文件

- `.ibd`: xxx 是表名，innoDB 引擎的每张表都会对应这样一个表空间文件，存储该表的表结构（frm、sdi）、数据和索引

  ibd 是二进制文件，无法直接打开，但是可以输入指令 ibd2sdi 得到可查看的 JSON

- `.frm`: **表结构**会保存在这个文件。在 MySQL 中建立一张表都会生成一个.frm 文件，该文件是用来保存每个表的元数据信息的，主要包含表结构定义。

### 逻辑存储结构

<img src="https://cdn.jsdelivr.net/gh/davidliuk/images@master/blog/%E8%A1%A8%E7%A9%BA%E9%97%B4%E7%BB%93%E6%9E%84.drawio.png" alt="img" style="zoom:50%;" />

- 表空间 Tablespace
- 段 Segment
- 区 Extent
- 页 Page
- 行 Row

## 其他引擎及选择

### MyISAM

MyISAM 是 MySQL 早期的默认存储引擎

#### 特点

- 不支持事务，不支持外键
- 支持表锁，不支持行锁
- 访问速度快

#### 文件

- `.myd` 存放数据

- `.myi` 存放索引

- `.sdi` 表结构

### Memory

Memory 引擎的表数据时存储在内存中的，由于受到硬件问题、或断电问题的影响，只能将这些表作为临时表或缓存使用。

#### 特点

- 内存存放
- hash 索引（默认）

#### 文件

- `.sdi`: 存储结构信息

## 对比

![截屏2022-07-28 17.53.57](https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/3978/%E6%88%AA%E5%B1%8F2022-07-28%2017.53.57.png)

这两种用的比较少，因为使用 MyISAM 的场景被 MongoDB 取代，Memory 的场景被 Redis 取代。

### 应用

核心数据 InnoDB

非核心数据可以 MyISAM，如足迹啥的
