# 全局锁



对整个数据库实例加锁，加锁以后整个实例处于只读状态，后续的DML写操作、DDL语句，以及更新操作的事物提交语句都将被阻塞。



典型使用场景：全库的逻辑备份，对所有表进行锁定，从而获取一致性视图，保证数据的完整性。



加全局锁语句：

```sql
flush tables with read lock;
```

释放锁：

```sql
unlock tables;
```



数据库备份

```sh
mysqldump -uroot -p1234 itcast > itcast.sql
```





特点

数据库中加全局锁，是一个比较重的操作，存在以下问题：

1. 如果再主库上备份，那么在备份期间都不能执行更新，业务基本上就得停摆。
2. 如果在从库上备份，那么在备份期间从库不能执行主库同步过来的二进制日志(binlog)，会导致主从延迟。



解决方案：

在InnoDB引擎中，可以在备份时加上参数--single- transaction来完成不加锁的一致性备份，通过快照读实现的

