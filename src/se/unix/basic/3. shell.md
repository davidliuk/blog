# 3. Shell 编程

（Linux课讲的是系统编程不是shell）



### 基本

1. \#是注释



shell脚本的第一行



文件的前16个bit（前两个字节/英文字符）是magic number，

来说明是啥，然后用后面的东西解释（sh可以ls也可以，都行，但是能做的内容不一样多）





> ”符号链接“待会讲



```sh
#!/bin/sh


```



ll是alias：ls -l



执行方法：

- sh 名字

- Chmod -x 增加可执行权限

  



脚本语言里面，变量基本上不需要声明类型，直接=赋值即可

shell里面变量只有一种类型，就是字符串

shell里面变量名称喜欢全大写，



连续的字符串可以 省略引号，但是如果有括号，就必须要单引号、双引号



变量引用，就是在变量名前面+\$符号

```sh
$HELLO
${HELLO}
${HELLO:3:4} #完整版，取3到4
${HELLO::4} #可以随意缺省部分
${HELLO:3}
```



特殊变量

```sh
$# #传入的参数个数
$0 #sh脚本的名
$1 #就是输入的第一个参数
$? #The status of last CMD上一个命令的返回值（成功是0，失败是1等）
```



字符串（变量值）拼接，直接echo后面变量挨着写即可



变量默认值（常用于取不一定设置的环境变量时）

```sh
${COLOR:-green} #无的时候用-后面替换
${COLOR:=green} #无的时候用=后面替换，且将这个变量赋值，如果有则不赋值
```



env是set的子集



ps看进程



export可以把set里面的变量升级为环境变量

环境变量：可以通过父进程传递给子进程的



```sh
PATH=.:$PATH #就是加上这个"."#当前目录
恢复的话就是，PATH=${PATH:2}
```



su命令只切换目录，但是不切换环境；su -就可以同时切换到目标用户的环境



有空格分割的话，for each的时候就相当于数组



### 条件测试

分支

测试工具主要就是\$?



其实就是在运行一些命令（实际上并不是在变成）

0-255，只用了8个bit



shell里面0是真，其他都是假（与C相反）



权限测试语句

- test -w 文件名，测试他的执行权限
- `[ -w a.c ]`方括号语法，注意空格一个都不能差，不然报错



字符串测试

- !=
- =



数字测试

- gt
- lt
- ne
- eq



## 循环语句

### foreach



命令替换：

- \`ls\`
- \$(ls)





### for





### while & until loop



执行数学运算$((1+1))





if



case







## I/O

echo

read，读取用户输入的字符





tee 可以把命令的流分成两叉，常用在既把输出到文件又输出他







' '只是当做字符串

" "可以转义里面的变量或者公式进行输出

\` \`命令替换





## 函数



想要获取输入的参数就用，\$1, \$2等

返回值，在0-255之间，但是



include：.
