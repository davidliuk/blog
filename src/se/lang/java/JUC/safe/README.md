# 线程安全





三要素：

- 可见性，一个线程对共享变量修改，另一个线程能看到最新的结果
- 有序性，一个线程内代码按编写顺序执行（多线程下不能）
- 原子性，一个线程内多行代码以一个整体运行，期间不难有其他线程的代码插队





volatile能够保证共享变量的可见性与有序性，但是并不难保证原子性

volatile关键字可以禁止指令进行重排序优化





原子性的实现

- 锁
- CAS





指令交错，就会导致问题
