# 哈希函数

## Hash函数

哈希函数

$H: \{0,1\}^*\rightarrow\{0,1\}^k,k\in N^+$

可以把任意长度的输入，映射到固定长度上的输出



性质：

- collision- resistant 抗碰撞
- hiding 隐藏
- Puzzle- friendly



### collision- resistant 抗碰撞

定义：$\forall x\neg\exist y\ne x,H(x)=H(y)$

即x与H(x)是绑定关系，

如迅雷文件下面有一个MD5, SHA1, SHA256，来保证下载的文件与上传的文件相同



牵一发而动全身，任何轻微的改动，都会对MD5值造成重大的改变

任何大小的文件，都能映射到一个固定长度的字符串上



- 用的比较多的就是：SHA-256
- MD、SHA-1被淘汰，被破解了

hash as message digest 信息摘要，不用担心内容溢出



### Hiding 隐藏性

给H(x)很难找到x

预测股票哪支大涨

承诺



让大家看部分，证明确实有答案，但是不能全让看

知道花钱的事实，但是不知道花了多少钱

每次给看部分，验证正确性，然后，



在不让别人知道答案的情况下，证明我知道解法。



**零知识证明 zero-knowledge proof**



### Puzzle- friendly

对每个可能输出值y，如果k是

$H(k||x)=y$

比特币要求每10分钟出一块

挖矿x是一个随机数，





## 哈希指针和数据结构



哈希函数抗碰撞，用哈希函数来作为指针，找到下一位区块



两类节点

- 权节点：需要记录所有的交易信息
- 轻节点：只保留一个哈希，这个哈希就可以囊括整个链所有的信息

根节点哈希值会包含所有



实验有这个默克尔哈希树，自己构建

随便选去一个哈希函数，然后可以拿数组实现这个算法



证明元素不存在于默克尔树的方法：对data排序，就可以看到这个元素是否在里面



Tree holds many items but just need to remember the root hash

Can verify membership in O(log n) time/space

Variant: sorted Merkle tree can verify non-membership in O(log n)

(show items before, after the missing one)