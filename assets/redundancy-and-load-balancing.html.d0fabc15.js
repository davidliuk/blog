import{_ as r}from"./_plugin-vue_export-helper.cdc0426e.js";import{o as l,c as s,a,b as e,e as i,f as d,r as o}from"./app.133d30c8.js";const t={},c=a("h1",{id:"redundancy-and-load-balancing",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#redundancy-and-load-balancing","aria-hidden":"true"},"#"),e(" Redundancy and Load Balancing")],-1),h=a("p",null,"stand by",-1),p=a("p",null,"spare",-1),u=a("ul",null,[a("li",null,"cold spare"),a("li",null,"warm spare"),a("li",null,"hot spare")],-1),b=a("p",null,"failover 故障转移（实际上是服务转义）",-1),v=a("p",null,"虚拟IP技术，大家都用同一个虚拟IP地址",-1),_={href:"http://failover.sh",target:"_blank",rel:"noopener noreferrer"},f=d(`<div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/sh</span>
<span class="token assign-left variable">VIP</span><span class="token operator">=</span><span class="token string">&quot;10.0.0.1&quot;</span>
<span class="token assign-left variable">DEV</span><span class="token operator">=</span><span class="token string">&quot;eth0&quot;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="health-check" tabindex="-1"><a class="header-anchor" href="#health-check" aria-hidden="true">#</a> Health Check</h2><p>判断服务是否坏的方法</p><ol><li>ping，监视进程发起的</li><li>Monitor，监视进程发起的</li><li>Heartbeat，被监视方发的，自己说我没事</li></ol><p>round robin</p><h2 id="load-balancer" tabindex="-1"><a class="header-anchor" href="#load-balancer" aria-hidden="true">#</a> Load Balancer</h2><h2 id="ipvs-ip-virtual-server-linux-s-load-balancer" tabindex="-1"><a class="header-anchor" href="#ipvs-ip-virtual-server-linux-s-load-balancer" aria-hidden="true">#</a> IPVS (IP Virtual Server): Linux&#39;s load balancer</h2><h3 id="use-ipvs" tabindex="-1"><a class="header-anchor" href="#use-ipvs" aria-hidden="true">#</a> Use IPVS</h3><p>two software</p><ul><li><p>ipvsdm</p></li><li><p>keepalived (use VRRP protocol)</p><p>SOAP, REST都是基于HTTP</p></li></ul><h3 id="build-ipvs" tabindex="-1"><a class="header-anchor" href="#build-ipvs" aria-hidden="true">#</a> Build IPVS</h3><p>L4 Switch vs. L7 Switch</p><p>内容服务器</p><h2 id="redundancy-of-routers-and-load-balancer" tabindex="-1"><a class="header-anchor" href="#redundancy-of-routers-and-load-balancer" aria-hidden="true">#</a> Redundancy of Routers and Load Balancer</h2><h3 id="vrrp" tabindex="-1"><a class="header-anchor" href="#vrrp" aria-hidden="true">#</a> VRRP</h3><p>Virtual router redundancy protocol</p><ul><li>IP Address</li><li>Virtual Rtr ID ()</li><li>Priority (优先顺序)</li></ul><p>四层负载均衡</p>`,18);function m(x,g){const n=o("ExternalLinkIcon");return l(),s("div",null,[c,h,p,u,b,v,a("p",null,[a("a",_,[e("failover.sh"),i(n)])]),f])}const P=r(t,[["render",m],["__file","redundancy-and-load-balancing.html.vue"]]);export{P as default};
