import{_ as a}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as n,a as t,o as m}from"./app-CGXHKXsa.js";const e={};function i(p,s){return m(),n("div",null,s[0]||(s[0]=[t('<h1 id="positional-encoding" tabindex="-1"><a class="header-anchor" href="#positional-encoding"><span>Positional Encoding</span></a></h1><table><thead><tr><th></th><th>优势</th><th>劣势</th></tr></thead><tbody><tr><td>绝对位置编码</td><td>计算速度较快</td><td>文字间相对位置信息不明显<br>推理窗口受训练长度限制</td></tr><tr><td>相对位置编码</td><td>可学习文字间相对信息</td><td>计算量增大<br>无法使用KV Cache</td></tr></tbody></table><h2 id="sinusoidal" tabindex="-1"><a class="header-anchor" href="#sinusoidal"><span>Sinusoidal</span></a></h2><p>正余弦位置编码 Sine Cosine Embedding Positions</p><p>最早的就是：<code>Input=Embedding+Position</code></p><h2 id="rope" tabindex="-1"><a class="header-anchor" href="#rope"><span>RoPE</span></a></h2><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mi>t</mi><mi>t</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mo stretchy="false">(</mo><mi>q</mi><mo separator="true">,</mo><mi>k</mi><mo stretchy="false">)</mo><mo>=</mo><mi>q</mi><mo>⋅</mo><mi>k</mi><mo>=</mo><mi>q</mi><msup><mi>k</mi><mi>T</mi></msup></mrow><annotation encoding="application/x-tex">attention(q,k)=q\\cdot k=qk^T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">a</span><span class="mord mathnormal">tt</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal">t</span><span class="mord mathnormal">i</span><span class="mord mathnormal">o</span><span class="mord mathnormal">n</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6389em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0358em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span></span></span></span> 没有位置信息</p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi><mi>R</mi><mo stretchy="false">(</mo><mi>m</mi><mo stretchy="false">)</mo><mo>⋅</mo><mi>k</mi><mi>R</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo>=</mo><mi>q</mi><mi>R</mi><mo stretchy="false">(</mo><mi>m</mi><mo stretchy="false">)</mo><mi>R</mi><mo stretchy="false">(</mo><mi>n</mi><msup><mo stretchy="false">)</mo><mi>T</mi></msup><msup><mi>k</mi><mi>T</mi></msup><mo>=</mo><mi>q</mi><mi>R</mi><mo stretchy="false">(</mo><mi>m</mi><mo>−</mo><mi>n</mi><mo stretchy="false">)</mo><msup><mi>k</mi><mi>T</mi></msup></mrow><annotation encoding="application/x-tex">qR(m)\\cdot kR(n)=qR(m)R(n)^Tk^T=qR(m-n)k^T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">qR</span><span class="mopen">(</span><span class="mord mathnormal">m</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0913em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">qR</span><span class="mopen">(</span><span class="mord mathnormal">m</span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">qR</span><span class="mopen">(</span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.0913em;vertical-align:-0.25em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span></span></span></span> 带有相对位置信息</p><p>维度两两一组进行旋转</p><ul><li>不再在词向量（字典查找表）中加入位置信息</li><li>通过旋转矩阵对向量(Q、K)进行角度旋转</li><li>长度不变、角度相同=dot product不变！</li></ul><h2 id="alibi" tabindex="-1"><a class="header-anchor" href="#alibi"><span>ALiBi</span></a></h2><p>Attention with Linear Bias</p><p>线性偏置项位置编码</p><p>上下文推理窗口长度</p><p>外推</p>',15)]))}const o=a(e,[["render",i],["__file","pe.html.vue"]]),c=JSON.parse(`{"path":"/ai/gm/llm/transformer/pe.html","title":"Positional Encoding","lang":"en-US","frontmatter":{"description":"Positional Encoding Sinusoidal 正余弦位置编码 Sine Cosine Embedding Positions 最早的就是：Input=Embedding+Position RoPE attention(q,k)=q⋅k=qkT 没有位置信息 qR(m)⋅kR(n)=qR(m)R(n)TkT=qR(m−n)kT 带有相对位...","head":[["meta",{"property":"og:url","content":"https://davidliuk.github.io/blog/blog/ai/gm/llm/transformer/pe.html"}],["meta",{"property":"og:site_name","content":"David's Blog"}],["meta",{"property":"og:title","content":"Positional Encoding"}],["meta",{"property":"og:description","content":"Positional Encoding Sinusoidal 正余弦位置编码 Sine Cosine Embedding Positions 最早的就是：Input=Embedding+Position RoPE attention(q,k)=q⋅k=qkT 没有位置信息 qR(m)⋅kR(n)=qR(m)R(n)TkT=qR(m−n)kT 带有相对位..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2025-10-26T05:16:21.000Z"}],["meta",{"property":"article:modified_time","content":"2025-10-26T05:16:21.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Positional Encoding\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-10-26T05:16:21.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"David Liu\\",\\"url\\":\\"https://github.com/davidliuk\\"}]}"]]},"headers":[{"level":2,"title":"Sinusoidal","slug":"sinusoidal","link":"#sinusoidal","children":[]},{"level":2,"title":"RoPE","slug":"rope","link":"#rope","children":[]},{"level":2,"title":"ALiBi","slug":"alibi","link":"#alibi","children":[]}],"git":{"createdTime":1755417148000,"updatedTime":1761455781000,"contributors":[{"name":"dawei.liu","email":"dawei.liu@bytedance.com","commits":1}]},"readingTime":{"minutes":0.71,"words":213},"filePathRelative":"ai/gm/llm/transformer/pe.md","localizedDate":"August 17, 2025","excerpt":"\\n<table>\\n<thead>\\n<tr>\\n<th></th>\\n<th>优势</th>\\n<th>劣势</th>\\n</tr>\\n</thead>\\n<tbody>\\n<tr>\\n<td>绝对位置编码</td>\\n<td>计算速度较快</td>\\n<td>文字间相对位置信息不明显<br>推理窗口受训练长度限制</td>\\n</tr>\\n<tr>\\n<td>相对位置编码</td>\\n<td>可学习文字间相对信息</td>\\n<td>计算量增大<br>无法使用KV Cache</td>\\n</tr>\\n</tbody>\\n</table>\\n<h2>Sinusoidal</h2>\\n<p>正余弦位置编码 Sine Cosine Embedding Positions</p>","autoDesc":true}`);export{o as comp,c as data};
