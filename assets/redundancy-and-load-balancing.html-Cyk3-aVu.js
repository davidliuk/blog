import{_ as e}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as i,a as l,o as n}from"./app-BBRqDuqm.js";const r={};function s(t,a){return n(),i("div",null,a[0]||(a[0]=[l(`<h1 id="redundancy-and-load-balancing" tabindex="-1"><a class="header-anchor" href="#redundancy-and-load-balancing"><span>Redundancy and Load Balancing</span></a></h1><p>Possible failures</p><ul><li>Web server failure 服务器失败</li></ul><p>stand by</p><p>spare 方式</p><ul><li>cold spare</li><li>warm spare</li><li>hot spare</li></ul><p>failover 故障转移（实际上是服务转义）</p><p>虚拟 IP 技术，大家都用同一个虚拟 IP 地址</p><p><a href="http://failover.sh" target="_blank" rel="noopener noreferrer">failover.sh</a></p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#!/bin/sh</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">VIP</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;10.0.0.1&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">DEV</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;eth0&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="health-check" tabindex="-1"><a class="header-anchor" href="#health-check"><span>Health Check</span></a></h2><p>判断服务是否坏的方法</p><ol><li>ping，监视进程发起的</li><li>Monitor，监视进程发起的</li><li>Heartbeat，被监视方发的，自己说我没事</li></ol><h2 id="load-balancer" tabindex="-1"><a class="header-anchor" href="#load-balancer"><span>Load Balancer</span></a></h2><p>round robin</p><h2 id="ipvs-ip-virtual-server-linux-s-load-balancer" tabindex="-1"><a class="header-anchor" href="#ipvs-ip-virtual-server-linux-s-load-balancer"><span>IPVS (IP Virtual Server): Linux&#39;s load balancer</span></a></h2><h3 id="use-ipvs" tabindex="-1"><a class="header-anchor" href="#use-ipvs"><span>Use IPVS</span></a></h3><p>two software</p><ul><li><p>ipvsdm</p></li><li><p>keepalived (use VRRP protocol)</p><p>SOAP, REST 都是基于 HTTP</p></li></ul><h3 id="build-ipvs" tabindex="-1"><a class="header-anchor" href="#build-ipvs"><span>Build IPVS</span></a></h3><p>L4 Switch vs. L7 Switch</p><p>内容服务器</p><h2 id="redundancy-of-routers-and-load-balancer" tabindex="-1"><a class="header-anchor" href="#redundancy-of-routers-and-load-balancer"><span>Redundancy of Routers and Load Balancer</span></a></h2><h3 id="vrrp" tabindex="-1"><a class="header-anchor" href="#vrrp"><span>VRRP</span></a></h3><p>Virtual router redundancy protocol</p><ul><li>IP Address</li><li>Virtual Rtr ID ()</li><li>Priority (优先顺序)</li></ul><p>四层负载均衡</p>`,27)]))}const p=e(r,[["render",s],["__file","redundancy-and-load-balancing.html.vue"]]),c=JSON.parse(`{"path":"/se/devops/unix/availability/redundancy-and-load-balancing.html","title":"Redundancy and Load Balancing","lang":"en-US","frontmatter":{"description":"Redundancy and Load Balancing Possible failures Web server failure 服务器失败 stand by spare 方式 cold spare warm spare hot spare failover 故障转移（实际上是服务转义） 虚拟 IP 技术，大家都用同一个虚拟 IP 地址 failo...","head":[["meta",{"property":"og:url","content":"https://davidliuk.github.io/blog/blog/se/devops/unix/availability/redundancy-and-load-balancing.html"}],["meta",{"property":"og:site_name","content":"David's Blog"}],["meta",{"property":"og:title","content":"Redundancy and Load Balancing"}],["meta",{"property":"og:description","content":"Redundancy and Load Balancing Possible failures Web server failure 服务器失败 stand by spare 方式 cold spare warm spare hot spare failover 故障转移（实际上是服务转义） 虚拟 IP 技术，大家都用同一个虚拟 IP 地址 failo..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2024-05-08T07:35:02.000Z"}],["meta",{"property":"article:modified_time","content":"2024-05-08T07:35:02.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Redundancy and Load Balancing\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-05-08T07:35:02.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"David Liu\\",\\"url\\":\\"https://github.com/davidliuk\\"}]}"]]},"headers":[{"level":2,"title":"Health Check","slug":"health-check","link":"#health-check","children":[]},{"level":2,"title":"Load Balancer","slug":"load-balancer","link":"#load-balancer","children":[]},{"level":2,"title":"IPVS (IP Virtual Server): Linux's load balancer","slug":"ipvs-ip-virtual-server-linux-s-load-balancer","link":"#ipvs-ip-virtual-server-linux-s-load-balancer","children":[{"level":3,"title":"Use IPVS","slug":"use-ipvs","link":"#use-ipvs","children":[]},{"level":3,"title":"Build IPVS","slug":"build-ipvs","link":"#build-ipvs","children":[]}]},{"level":2,"title":"Redundancy of Routers and Load Balancer","slug":"redundancy-of-routers-and-load-balancer","link":"#redundancy-of-routers-and-load-balancer","children":[{"level":3,"title":"VRRP","slug":"vrrp","link":"#vrrp","children":[]}]}],"git":{"createdTime":1669794167000,"updatedTime":1715153702000,"contributors":[{"name":"liudawei47","email":"liudawei47@jd.com","commits":2},{"name":"刘大维","email":"davidliu@liudaweideMacBook-Pro.local","commits":2}]},"readingTime":{"minutes":0.58,"words":173},"filePathRelative":"se/devops/unix/availability/redundancy-and-load-balancing.md","localizedDate":"November 30, 2022","excerpt":"\\n<p>Possible failures</p>\\n<ul>\\n<li>Web server failure 服务器失败</li>\\n</ul>\\n<p>stand by</p>\\n<p>spare 方式</p>\\n<ul>\\n<li>cold spare</li>\\n<li>warm spare</li>\\n<li>hot spare</li>\\n</ul>\\n<p>failover 故障转移（实际上是服务转义）</p>\\n<p>虚拟 IP 技术，大家都用同一个虚拟 IP 地址</p>\\n<p><a href=\\"http://failover.sh\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">failover.sh</a></p>","autoDesc":true}`);export{p as comp,c as data};
