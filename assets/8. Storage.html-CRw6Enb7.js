import{_ as p}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,a as t,o}from"./app-C_tIvXCt.js";const i={};function l(n,e){return o(),a("div",null,e[0]||(e[0]=[t('<h1 id="_8-存储" tabindex="-1"><a class="header-anchor" href="#_8-存储"><span>8. 存储</span></a></h1><h3 id="logical-volume-management-lvm" tabindex="-1"><a class="header-anchor" href="#logical-volume-management-lvm"><span>Logical Volume Management (LVM)</span></a></h3><p>这样有逻辑上的统一调配</p><p>服务器，跨盘文件传输非常慢，</p><p>通过虚拟化解决，逻辑上组合成一个硬盘，这样 i 节点就不用动了</p><p>扩容一般好，动态扩容，不需要停机</p><p>支持卷快照</p><p>一直在变，快照不太好做，但是 LVM 可以直接做到</p><p>在线备份，真备份不放在一块的，防止一起被烧毁</p><p>操作</p><p>pv：Physical Volume</p><p>vg：volume group</p><p>lv：logical volume</p><p>Linux 文件类型：83</p><p>Linux Logic Volume：8e</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>逻辑卷，操作和分区完全一样</p><p><code>mkfs</code></p><p><code>mount</code></p><p>删除是倒着删，先删小，再删大</p><p><code>display</code></p><p>-v 冗余，可以展示额外的信息，</p><p>vg：在 dev 下的一个文件夹</p><p>lv：在 vg 文件夹下的一个符号链接，指向一个 dev、下面的虚拟的设备</p><p>符号链接：在 dev 下生成一个虚拟的设备</p><p><code>unmout</code></p><p>先对 vg 扩容，然后对 lv 扩容</p><p>缩容比较恐怖，涉及到文件的移动，容易出现问题（一般没事，但是怕关键时刻掉链子）</p><p>sda1 是 boot，需要单独一个分区里，因为 LVM 需要内核支持</p><p>mount 可以看到挂载的内容</p><p>resize2fs 可以对 Volume 扩容</p><h3 id="volume-snapshot" tabindex="-1"><a class="header-anchor" href="#volume-snapshot"><span>volume snapshot</span></a></h3><p>redis fork 子进程 copy-on-write</p><p>tuning，不知道进程多大，非常难算，用来 prefork</p><p>只能在线做快照，不能离线备份（都存在电脑的本地了）</p>',35)]))}const r=p(i,[["render",l],["__file","8. Storage.html.vue"]]),c=JSON.parse(`{"path":"/se/devops/unix/basic/8.%20Storage.html","title":"8. 存储","lang":"en-US","frontmatter":{"description":"8. 存储 Logical Volume Management (LVM) 这样有逻辑上的统一调配 服务器，跨盘文件传输非常慢， 通过虚拟化解决，逻辑上组合成一个硬盘，这样 i 节点就不用动了 扩容一般好，动态扩容，不需要停机 支持卷快照 一直在变，快照不太好做，但是 LVM 可以直接做到 在线备份，真备份不放在一块的，防止一起被烧毁 操作 pv：Ph...","head":[["meta",{"property":"og:url","content":"https://davidliuk.github.io/blog/blog/se/devops/unix/basic/8.%20Storage.html"}],["meta",{"property":"og:site_name","content":"David's Blog"}],["meta",{"property":"og:title","content":"8. 存储"}],["meta",{"property":"og:description","content":"8. 存储 Logical Volume Management (LVM) 这样有逻辑上的统一调配 服务器，跨盘文件传输非常慢， 通过虚拟化解决，逻辑上组合成一个硬盘，这样 i 节点就不用动了 扩容一般好，动态扩容，不需要停机 支持卷快照 一直在变，快照不太好做，但是 LVM 可以直接做到 在线备份，真备份不放在一块的，防止一起被烧毁 操作 pv：Ph..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2024-05-08T07:35:02.000Z"}],["meta",{"property":"article:modified_time","content":"2024-05-08T07:35:02.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"8. 存储\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-05-08T07:35:02.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"David Liu\\",\\"url\\":\\"https://github.com/davidliuk\\"}]}"]]},"headers":[{"level":3,"title":"Logical Volume Management (LVM)","slug":"logical-volume-management-lvm","link":"#logical-volume-management-lvm","children":[]},{"level":3,"title":"volume snapshot","slug":"volume-snapshot","link":"#volume-snapshot","children":[]}],"git":{"createdTime":1669446166000,"updatedTime":1715153702000,"contributors":[{"name":"liudawei47","email":"liudawei47@jd.com","commits":3},{"name":"刘大维","email":"davidliu@liudaweideMacBook-Pro.local","commits":2}]},"readingTime":{"minutes":1.2,"words":360},"filePathRelative":"se/devops/unix/basic/8. Storage.md","localizedDate":"November 26, 2022","excerpt":"\\n<h3>Logical Volume Management (LVM)</h3>\\n<p>这样有逻辑上的统一调配</p>\\n<p>服务器，跨盘文件传输非常慢，</p>\\n<p>通过虚拟化解决，逻辑上组合成一个硬盘，这样 i 节点就不用动了</p>\\n<p>扩容一般好，动态扩容，不需要停机</p>\\n<p>支持卷快照</p>\\n<p>一直在变，快照不太好做，但是 LVM 可以直接做到</p>\\n<p>在线备份，真备份不放在一块的，防止一起被烧毁</p>\\n<p>操作</p>\\n<p>pv：Physical Volume</p>\\n<p>vg：volume group</p>\\n<p>lv：logical volume</p>","autoDesc":true}`);export{r as comp,c as data};
