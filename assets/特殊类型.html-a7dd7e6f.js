import{_ as d,V as o,W as t,X as a,Y as e,$ as h,Z as i,E as n}from"./framework-e5d7a6b2.js";const c={},l=i('<h1 id="特殊类型" tabindex="-1"><a class="header-anchor" href="#特殊类型" aria-hidden="true">#</a> 特殊类型</h1><h2 id="bitmap" tabindex="-1"><a class="header-anchor" href="#bitmap" aria-hidden="true">#</a> Bitmap</h2><p>底层String 类型是会保存为二进制的字节数组</p><h3 id="介绍" tabindex="-1"><a class="header-anchor" href="#介绍" aria-hidden="true">#</a> 介绍</h3><p>Bitmap 存储的是连续的二进制数字（0 和 1），通过 Bitmap, 只需要一个 bit 位来表示某个元素对应的值或者状态，key 就是对应元素本身 。我们知道 8 个 bit 可以组成一个 byte，所以 Bitmap 本身会极大的节省储存空间。</p><p>你可以将 Bitmap 看作是一个存储二进制数字（0 和 1）的数组，数组中每个元素的下标叫做 offset（偏移量）。</p><h3 id="命令" tabindex="-1"><a class="header-anchor" href="#命令" aria-hidden="true">#</a> 命令</h3><ul><li><code>SETBIT</code></li><li><code>GETBIT</code></li><li><code>BITCOUNT</code></li><li><code>BITOP</code></li><li><code>BITPOS</code></li></ul><h3 id="应用" tabindex="-1"><a class="header-anchor" href="#应用" aria-hidden="true">#</a> 应用</h3><p><strong>需要保存状态信息（0/1 即可表示）的场景</strong></p><ul><li>举例 ：用户签到情况、活跃用户情况、用户行为统计（比如是否点赞过某个视频）。</li></ul><h5 id="判断用户登陆态" tabindex="-1"><a class="header-anchor" href="#判断用户登陆态" aria-hidden="true">#</a> 判断用户登陆态</h5><p>Bitmap 提供了 <code>GETBIT、SETBIT</code> 操作，通过一个偏移值 offset 对 bit 数组的 offset 位置的 bit 位进行读写操作，需要注意的是 offset 从 0 开始。</p><p>只需要一个 key = login_status 表示存储用户登陆状态集合数据， 将用户 ID 作为 offset，在线就设置为 1，下线设置 0。通过 <code>GETBIT</code>判断对应的用户是否在线。 5000 万用户只需要 6 MB 的空间。</p><h2 id="hyperloglog" tabindex="-1"><a class="header-anchor" href="#hyperloglog" aria-hidden="true">#</a> HyperLogLog</h2>',15),s={href:"https://en.wikipedia.org/wiki/HyperLogLog",target:"_blank",rel:"noopener noreferrer"},p=i('<h3 id="命令-1" tabindex="-1"><a class="header-anchor" href="#命令-1" aria-hidden="true">#</a> 命令</h3><ul><li><code>PFADD</code></li><li><code>PFCOUNT</code></li><li><code>PFMERGE</code></li></ul><h3 id="应用-1" tabindex="-1"><a class="header-anchor" href="#应用-1" aria-hidden="true">#</a> 应用</h3><p><strong>数量量巨大（百万、千万级别以上）的计数场景</strong></p><ul><li>举例 ：热门网站每日/每周/每月访问 ip 数统计、热门帖子 uv 统计、</li></ul><h2 id="geo" tabindex="-1"><a class="header-anchor" href="#geo" aria-hidden="true">#</a> GEO</h2><p>Geospatial index（地理空间索引，简称 GEO），基于 Sorted Set 实现。</p><p>GEO 类型使用 GeoHash 编码方法实现了经纬度到 Sorted Set 中元素权重分数的转换，这其中的两个关键机制就是「对二维地图做区间划分」和「对区间进行编码」。一组经纬度落在某个区间后，就用区间的编码值来表示，并把编码值作为 Sorted Set 元素的权重分数。</p><h3 id="命令-2" tabindex="-1"><a class="header-anchor" href="#命令-2" aria-hidden="true">#</a> 命令</h3><ul><li><code>GEOADD</code></li><li><code>GEOPOS</code></li><li><code>GEODIST</code></li><li><code>GEORADIUS</code></li></ul><h3 id="应用-2" tabindex="-1"><a class="header-anchor" href="#应用-2" aria-hidden="true">#</a> 应用</h3><p><strong>需要管理使用地理空间数据的场景</strong></p><ul><li>举例：附近的人。</li></ul><h2 id="stream" tabindex="-1"><a class="header-anchor" href="#stream" aria-hidden="true">#</a> Stream</h2><p>5.0 新增</p>',15);function u(f,_){const r=n("ExternalLinkIcon");return o(),t("div",null,[l,a("p",null,[e("HyperLogLog 的实现涉及到很多数学问题，太费脑子了，我也没有搞懂，如果你想了解一下，课下可以看看这个："),a("a",s,[e("HyperLogLog (opens new window)"),h(r)]),e("。")]),p])}const b=d(c,[["render",u],["__file","特殊类型.html.vue"]]);export{b as default};
